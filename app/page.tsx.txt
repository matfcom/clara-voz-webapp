"use client"
import { useState } from "react"
import { useVoice } from "@/hooks/useVoice"

export default function Home() {
  const { isRecording, isSpeaking, transcript, speakResponse, startRecording, stopRecording } = useVoice()
  const [isLoading, setIsLoading] = useState(false)

  const handlePress = async () => {
    setIsLoading(true)
    const result = await stopRecording()
    if (result) await speakResponse(result)
    setIsLoading(false)
  }

  return (
    <main className="flex flex-col items-center justify-center min-h-screen bg-black text-white">
      <h1 className="text-3xl font-bold mb-6">Habla con Clara</h1>
      <button
        onMouseDown={startRecording}
        onMouseUp={handlePress}
        disabled={isSpeaking || isLoading}
        className="bg-white text-black rounded-full p-6 text-lg hover:scale-110 transition"
      >
        ğŸ™ï¸ {isRecording ? "Grabando..." : "Pulsa y habla"}
      </button>
      {transcript && <p className="mt-6 italic">ğŸ—£ï¸ â€œ{transcript}â€</p>}
    </main>
  )
}
